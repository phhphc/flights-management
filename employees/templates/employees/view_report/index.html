{% extends 'base.html' %}}

{% block head %}
<title>Report </title>
{% endblock %}

{% block content %} <div class="row">
    <div class="col-2"></div>
    <div class="col-8">
        <div class="global-manage">

            <div>
                <h1 style="text-align: center; float: initial;">
                    Revenue Report
                </h1>
                <!-- <a class="add-btn-wrap" href="{% url 'add_flight' %}">
                    <div class="add-btn">
                        Add New Flight
                    </div>
                </a> -->
            </div>

            <!-- <br><br><br><br><br><br><br><br> -->

            <h2>
                Generate Report
            </h2>

            <div>
                <form action="" method="get">
                    {{ form.as_p }}
                    <input type="submit" value="Generate Report">
                </form>
            </div>

            <h2 style="margin: 70px 0 28px 0;">
                Báo cáo doanh thu tháng {{month}} năm {{year}}
            </h2>
            <div>
                <table>
                    <tr>
                        <th>STT</th>
                        <th>Mã Chuyến bay</th>
                        <th>Số Vé</th>
                        <th>Tỉ lệ</th>
                        <th>Doanh Thu</th>
                    </tr>

                    {% for f in month_flights %}
                    <tr>
                        <th></th>
                        <th>{{f }}</th>
                        <th>{{f.ticket_count }}</th>
                        <th>{{f.ticket_ratio_str }}</th>
                        <th>{{f.revenue }}</th>
                    </tr>
                    {% endfor %}
                </table>
            </div>

            <h2 style="margin: 70px 0 28px 0;">
                Báo cáo doanh thu năm {{year}}
            </h2>
            <div>
                <table>
                    <tr>
                        <th>STT</th>
                        <th>Tháng</th>
                        <th>Số chuyến bay</th>
                        <th>Doanh Thu</th>
                        <th>Tỉ lệ</th>
                    </tr>

                    {% for m in year_month_report %}
                    <tr>
                        <th></th>
                        <th>{{ m.month }}</th>
                        <th>{{m.flight_count }}</th>
                        <th>{{m.revenue }}</th>
                        <th>{{m.ticket_ratio }}</th>
                    </tr>
                    {% endfor %}
                </table>
            </div>

        </div>
    </div>
    <div class="col-2"></div>
</div>{% endblock content %}